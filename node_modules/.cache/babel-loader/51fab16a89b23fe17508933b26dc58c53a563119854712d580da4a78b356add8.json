{"ast":null,"code":"module.exports = function (Chart) {\n  var chartHelpers = Chart.helpers;\n  var helpers = require('./helpers.js')(Chart);\n  var events = require('./events.js')(Chart);\n  var annotationTypes = Chart.Annotation.types;\n  function setAfterDataLimitsHook(axisOptions) {\n    helpers.decorate(axisOptions, 'afterDataLimits', function (previous, scale) {\n      if (previous) previous(scale);\n      helpers.adjustScaleRange(scale);\n    });\n  }\n  function draw(drawTime) {\n    return function (chartInstance, easingDecimal) {\n      var defaultDrawTime = chartInstance.annotation.options.drawTime;\n      helpers.elements(chartInstance).filter(function (element) {\n        return drawTime === (element.options.drawTime || defaultDrawTime);\n      }).forEach(function (element) {\n        element.transition(easingDecimal).draw();\n      });\n    };\n  }\n  return {\n    beforeInit: function beforeInit(chartInstance) {\n      var chartOptions = chartInstance.options;\n\n      // Initialize chart instance plugin namespace\n      var ns = chartInstance.annotation = {\n        elements: {},\n        options: helpers.initConfig(chartOptions.annotation || {}),\n        onDestroy: [],\n        firstRun: true,\n        supported: false\n      };\n\n      // Add the annotation scale adjuster to each scale's afterDataLimits hook\n      chartInstance.ensureScalesHaveIDs();\n      if (chartOptions.scales) {\n        ns.supported = true;\n        chartHelpers.each(chartOptions.scales.xAxes, setAfterDataLimitsHook);\n        chartHelpers.each(chartOptions.scales.yAxes, setAfterDataLimitsHook);\n      }\n    },\n    beforeUpdate: function beforeUpdate(chartInstance) {\n      var ns = chartInstance.annotation;\n      if (!ns.supported) {\n        return;\n      }\n      if (!ns.firstRun) {\n        ns.options = helpers.initConfig(chartInstance.options.annotation || {});\n      } else {\n        ns.firstRun = false;\n      }\n      var elementIds = [];\n\n      // Add new elements, or update existing ones\n      ns.options.annotations.forEach(function (annotation) {\n        var id = annotation.id || helpers.objectId();\n\n        // No element with that ID exists, and it's a valid annotation type\n        if (!ns.elements[id] && annotationTypes[annotation.type]) {\n          var cls = annotationTypes[annotation.type];\n          var element = new cls({\n            id: id,\n            options: annotation,\n            chartInstance: chartInstance\n          });\n          element.initialize();\n          ns.elements[id] = element;\n          annotation.id = id;\n          elementIds.push(id);\n        } else if (ns.elements[id]) {\n          // Nothing to do for update, since the element config references\n          // the same object that exists in the chart annotation config\n          elementIds.push(id);\n        }\n      });\n\n      // Delete removed elements\n      Object.keys(ns.elements).forEach(function (id) {\n        if (elementIds.indexOf(id) === -1) {\n          ns.elements[id].destroy();\n          delete ns.elements[id];\n        }\n      });\n    },\n    afterScaleUpdate: function afterScaleUpdate(chartInstance) {\n      helpers.elements(chartInstance).forEach(function (element) {\n        element.configure();\n      });\n    },\n    beforeDatasetsDraw: draw('beforeDatasetsDraw'),\n    afterDatasetsDraw: draw('afterDatasetsDraw'),\n    afterDraw: draw('afterDraw'),\n    afterInit: function afterInit(chartInstance) {\n      // Detect and intercept events that happen on an annotation element\n      var watchFor = chartInstance.annotation.options.events;\n      if (chartHelpers.isArray(watchFor) && watchFor.length > 0) {\n        var canvas = chartInstance.chart.canvas;\n        var eventHandler = events.dispatcher.bind(chartInstance);\n        events.collapseHoverEvents(watchFor).forEach(function (eventName) {\n          chartHelpers.addEvent(canvas, eventName, eventHandler);\n          chartInstance.annotation.onDestroy.push(function () {\n            chartHelpers.removeEvent(canvas, eventName, eventHandler);\n          });\n        });\n      }\n    },\n    destroy: function destroy(chartInstance) {\n      var deregisterers = chartInstance.annotation.onDestroy;\n      while (deregisterers.length > 0) {\n        deregisterers.pop()();\n      }\n    }\n  };\n};","map":{"version":3,"names":["module","exports","Chart","chartHelpers","helpers","require","events","annotationTypes","Annotation","types","setAfterDataLimitsHook","axisOptions","decorate","previous","scale","adjustScaleRange","draw","drawTime","chartInstance","easingDecimal","defaultDrawTime","annotation","options","elements","filter","element","forEach","transition","beforeInit","chartOptions","ns","initConfig","onDestroy","firstRun","supported","ensureScalesHaveIDs","scales","each","xAxes","yAxes","beforeUpdate","elementIds","annotations","id","objectId","type","cls","initialize","push","Object","keys","indexOf","destroy","afterScaleUpdate","configure","beforeDatasetsDraw","afterDatasetsDraw","afterDraw","afterInit","watchFor","isArray","length","canvas","chart","eventHandler","dispatcher","bind","collapseHoverEvents","eventName","addEvent","removeEvent","deregisterers","pop"],"sources":["D:/Soft/DIPLOM PROJECT/GitProject/bac/node_modules/chartjs-plugin-annotation/src/annotation.js"],"sourcesContent":["module.exports = function(Chart) {\n\tvar chartHelpers = Chart.helpers;\n\n\tvar helpers = require('./helpers.js')(Chart);\n\tvar events = require('./events.js')(Chart);\n\n\tvar annotationTypes = Chart.Annotation.types;\n\n\tfunction setAfterDataLimitsHook(axisOptions) {\n\t\thelpers.decorate(axisOptions, 'afterDataLimits', function(previous, scale) {\n\t\t\tif (previous) previous(scale);\n\t\t\thelpers.adjustScaleRange(scale);\n\t\t});\n\t}\n\n\tfunction draw(drawTime) {\n\t\treturn function(chartInstance, easingDecimal) {\n\t\t\tvar defaultDrawTime = chartInstance.annotation.options.drawTime;\n\n\t\t\thelpers.elements(chartInstance)\n\t\t\t\t.filter(function(element) {\n\t\t\t\t\treturn drawTime === (element.options.drawTime || defaultDrawTime);\n\t\t\t\t})\n\t\t\t\t.forEach(function(element) {\n\t\t\t\t\telement.transition(easingDecimal).draw();\n\t\t\t\t});\n\t\t};\n\t}\n\n\treturn {\n\t\tbeforeInit: function(chartInstance) {\n\t\t\tvar chartOptions = chartInstance.options;\n\n\t\t\t// Initialize chart instance plugin namespace\n\t\t\tvar ns = chartInstance.annotation = {\n\t\t\t\telements: {},\n\t\t\t\toptions: helpers.initConfig(chartOptions.annotation || {}),\n\t\t\t\tonDestroy: [],\n\t\t\t\tfirstRun: true,\n\t\t\t\tsupported: false\n\t\t\t};\n\n\t\t\t// Add the annotation scale adjuster to each scale's afterDataLimits hook\n\t\t\tchartInstance.ensureScalesHaveIDs();\n\t\t\tif (chartOptions.scales) {\n\t\t\t\tns.supported = true;\n\t\t\t\tchartHelpers.each(chartOptions.scales.xAxes, setAfterDataLimitsHook);\n\t\t\t\tchartHelpers.each(chartOptions.scales.yAxes, setAfterDataLimitsHook);\n\t\t\t}\n\t\t},\n\t\tbeforeUpdate: function(chartInstance) {\n\t\t\tvar ns = chartInstance.annotation;\n\n\t\t\tif (!ns.supported) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!ns.firstRun) {\n\t\t\t\tns.options = helpers.initConfig(chartInstance.options.annotation || {});\n\t\t\t} else {\n\t\t\t\tns.firstRun = false;\n\t\t\t}\n\n\t\t\tvar elementIds = [];\n\n\t\t\t// Add new elements, or update existing ones\n\t\t\tns.options.annotations.forEach(function(annotation) {\n\t\t\t\tvar id = annotation.id || helpers.objectId();\n\t\t\t\t\n\t\t\t\t// No element with that ID exists, and it's a valid annotation type\n\t\t\t\tif (!ns.elements[id] && annotationTypes[annotation.type]) {\n\t\t\t\t\tvar cls = annotationTypes[annotation.type];\n\t\t\t\t\tvar element = new cls({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\toptions: annotation,\n\t\t\t\t\t\tchartInstance: chartInstance,\n\t\t\t\t\t});\n\t\t\t\t\telement.initialize();\n\t\t\t\t\tns.elements[id] = element;\n\t\t\t\t\tannotation.id = id;\n\t\t\t\t\telementIds.push(id);\n\t\t\t\t} else if (ns.elements[id]) {\n\t\t\t\t\t// Nothing to do for update, since the element config references\n\t\t\t\t\t// the same object that exists in the chart annotation config\n\t\t\t\t\telementIds.push(id);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Delete removed elements\n\t\t\tObject.keys(ns.elements).forEach(function(id) {\n\t\t\t\tif (elementIds.indexOf(id) === -1) {\n\t\t\t\t\tns.elements[id].destroy();\n\t\t\t\t\tdelete ns.elements[id];\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tafterScaleUpdate: function(chartInstance) {\n\t\t\thelpers.elements(chartInstance).forEach(function(element) {\n\t\t\t\telement.configure();\n\t\t\t});\n\t\t},\n\t\tbeforeDatasetsDraw: draw('beforeDatasetsDraw'),\n\t\tafterDatasetsDraw: draw('afterDatasetsDraw'),\n\t\tafterDraw: draw('afterDraw'),\n\t\tafterInit: function(chartInstance) {\n\t\t\t// Detect and intercept events that happen on an annotation element\n\t\t\tvar watchFor = chartInstance.annotation.options.events;\n\t\t\tif (chartHelpers.isArray(watchFor) && watchFor.length > 0) {\n\t\t\t\tvar canvas = chartInstance.chart.canvas;\n\t\t\t\tvar eventHandler = events.dispatcher.bind(chartInstance);\n\t\t\t\tevents.collapseHoverEvents(watchFor).forEach(function(eventName) {\n\t\t\t\t\tchartHelpers.addEvent(canvas, eventName, eventHandler);\n\t\t\t\t\tchartInstance.annotation.onDestroy.push(function() {\n\t\t\t\t\t\tchartHelpers.removeEvent(canvas, eventName, eventHandler);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tdestroy: function(chartInstance) {\n\t\t\tvar deregisterers = chartInstance.annotation.onDestroy;\n\t\t\twhile (deregisterers.length > 0) {\n\t\t\t\tderegisterers.pop()();\n\t\t\t}\n\t\t}\n\t};\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}