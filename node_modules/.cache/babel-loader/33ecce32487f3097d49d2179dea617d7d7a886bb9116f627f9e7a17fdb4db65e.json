{"ast":null,"code":"module.exports = function (Chart) {\n  var chartHelpers = Chart.helpers;\n  var helpers = require('./helpers.js')(Chart);\n  function collapseHoverEvents(events) {\n    var hover = false;\n    var filteredEvents = events.filter(function (eventName) {\n      switch (eventName) {\n        case 'mouseenter':\n        case 'mouseover':\n        case 'mouseout':\n        case 'mouseleave':\n          hover = true;\n          return false;\n        default:\n          return true;\n      }\n    });\n    if (hover && filteredEvents.indexOf('mousemove') === -1) {\n      filteredEvents.push('mousemove');\n    }\n    return filteredEvents;\n  }\n  function dispatcher(e) {\n    var ns = this.annotation;\n    var elements = helpers.elements(this);\n    var position = chartHelpers.getRelativePosition(e, this.chart);\n    var element = helpers.getNearestItems(elements, position);\n    var events = collapseHoverEvents(ns.options.events);\n    var dblClickSpeed = ns.options.dblClickSpeed;\n    var eventHandlers = [];\n    var eventHandlerName = helpers.getEventHandlerName(e.type);\n    var options = (element || {}).options;\n\n    // Detect hover events\n    if (e.type === 'mousemove') {\n      if (element && !element.hovering) {\n        // hover started\n        ['mouseenter', 'mouseover'].forEach(function (eventName) {\n          var eventHandlerName = helpers.getEventHandlerName(eventName);\n          var hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n          element.hovering = true;\n          if (typeof options[eventHandlerName] === 'function') {\n            eventHandlers.push([options[eventHandlerName], hoverEvent, element]);\n          }\n        });\n      } else if (!element) {\n        // hover ended\n        elements.forEach(function (element) {\n          if (element.hovering) {\n            element.hovering = false;\n            var options = element.options;\n            ['mouseout', 'mouseleave'].forEach(function (eventName) {\n              var eventHandlerName = helpers.getEventHandlerName(eventName);\n              var hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n              if (typeof options[eventHandlerName] === 'function') {\n                eventHandlers.push([options[eventHandlerName], hoverEvent, element]);\n              }\n            });\n          }\n        });\n      }\n    }\n\n    // Suppress duplicate click events during a double click\n    // 1. click -> 2. click -> 3. dblclick\n    //\n    // 1: wait dblClickSpeed ms, then fire click\n    // 2: cancel (1) if it is waiting then wait dblClickSpeed ms then fire click, else fire click immediately\n    // 3: cancel (1) or (2) if waiting, then fire dblclick \n    if (element && events.indexOf('dblclick') > -1 && typeof options.onDblclick === 'function') {\n      if (e.type === 'click' && typeof options.onClick === 'function') {\n        clearTimeout(element.clickTimeout);\n        element.clickTimeout = setTimeout(function () {\n          delete element.clickTimeout;\n          options.onClick.call(element, e);\n        }, dblClickSpeed);\n        e.stopImmediatePropagation();\n        e.preventDefault();\n        return;\n      } else if (e.type === 'dblclick' && element.clickTimeout) {\n        clearTimeout(element.clickTimeout);\n        delete element.clickTimeout;\n      }\n    }\n\n    // Dispatch the event to the usual handler, but only if we haven't substituted it\n    if (element && typeof options[eventHandlerName] === 'function' && eventHandlers.length === 0) {\n      eventHandlers.push([options[eventHandlerName], e, element]);\n    }\n    if (eventHandlers.length > 0) {\n      e.stopImmediatePropagation();\n      e.preventDefault();\n      eventHandlers.forEach(function (eventHandler) {\n        // [handler, event, element]\n        eventHandler[0].call(eventHandler[2], eventHandler[1]);\n      });\n    }\n  }\n  return {\n    dispatcher: dispatcher,\n    collapseHoverEvents: collapseHoverEvents\n  };\n};","map":{"version":3,"names":["module","exports","Chart","chartHelpers","helpers","require","collapseHoverEvents","events","hover","filteredEvents","filter","eventName","indexOf","push","dispatcher","e","ns","annotation","elements","position","getRelativePosition","chart","element","getNearestItems","options","dblClickSpeed","eventHandlers","eventHandlerName","getEventHandlerName","type","hovering","forEach","hoverEvent","createMouseEvent","onDblclick","onClick","clearTimeout","clickTimeout","setTimeout","call","stopImmediatePropagation","preventDefault","length","eventHandler"],"sources":["D:/Soft/DIPLOM PROJECT/GitProject/bac/node_modules/chartjs-plugin-annotation/src/events.js"],"sourcesContent":["module.exports = function(Chart) {\n\tvar chartHelpers = Chart.helpers;\n\tvar helpers = require('./helpers.js')(Chart);\n\n\tfunction collapseHoverEvents(events) {\n\t\tvar hover = false;\n\t\tvar filteredEvents = events.filter(function(eventName) {\n\t\t\tswitch (eventName) {\n\t\t\t\tcase 'mouseenter':\n\t\t\t\tcase 'mouseover':\n\t\t\t\tcase 'mouseout':\n\t\t\t\tcase 'mouseleave':\n\t\t\t\t\thover = true;\n\t\t\t\t\treturn false;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\tif (hover && filteredEvents.indexOf('mousemove') === -1) {\n\t\t\tfilteredEvents.push('mousemove');\n\t\t}\n\t\treturn filteredEvents;\n\t}\n\n\tfunction dispatcher(e) {\n\t\tvar ns = this.annotation;\n\t\tvar elements = helpers.elements(this);\n\t\tvar position = chartHelpers.getRelativePosition(e, this.chart);\n\t\tvar element = helpers.getNearestItems(elements, position);\n\t\tvar events = collapseHoverEvents(ns.options.events);\n\t\tvar dblClickSpeed = ns.options.dblClickSpeed;\n\t\tvar eventHandlers = [];\n\t\tvar eventHandlerName = helpers.getEventHandlerName(e.type);\n\t\tvar options = (element || {}).options;\n\n\t\t// Detect hover events\n\t\tif (e.type === 'mousemove') {\n\t\t\tif (element && !element.hovering) {\n\t\t\t\t// hover started\n\t\t\t\t['mouseenter', 'mouseover'].forEach(function(eventName) {\n\t\t\t\t\tvar eventHandlerName = helpers.getEventHandlerName(eventName);\n\t\t\t\t\tvar hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n\t\t\t\t\telement.hovering = true;\n\t\t\t\t\tif (typeof options[eventHandlerName] === 'function') {\n\t\t\t\t\t\teventHandlers.push([ options[eventHandlerName], hoverEvent, element ]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (!element) {\n\t\t\t\t// hover ended\n\t\t\t\telements.forEach(function(element) {\n\t\t\t\t\tif (element.hovering) {\n\t\t\t\t\t\telement.hovering = false;\n\t\t\t\t\t\tvar options = element.options;\n\t\t\t\t\t\t['mouseout', 'mouseleave'].forEach(function(eventName) {\n\t\t\t\t\t\t\tvar eventHandlerName = helpers.getEventHandlerName(eventName);\n\t\t\t\t\t\t\tvar hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n\t\t\t\t\t\t\tif (typeof options[eventHandlerName] === 'function') {\n\t\t\t\t\t\t\t\teventHandlers.push([ options[eventHandlerName], hoverEvent, element ]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Suppress duplicate click events during a double click\n\t\t// 1. click -> 2. click -> 3. dblclick\n\t\t//\n\t\t// 1: wait dblClickSpeed ms, then fire click\n\t\t// 2: cancel (1) if it is waiting then wait dblClickSpeed ms then fire click, else fire click immediately\n\t\t// 3: cancel (1) or (2) if waiting, then fire dblclick \n\t\tif (element && events.indexOf('dblclick') > -1 && typeof options.onDblclick === 'function') {\n\t\t\tif (e.type === 'click' && typeof options.onClick === 'function') {\n\t\t\t\tclearTimeout(element.clickTimeout);\n\t\t\t\telement.clickTimeout = setTimeout(function() {\n\t\t\t\t\tdelete element.clickTimeout;\n\t\t\t\t\toptions.onClick.call(element, e);\n\t\t\t\t}, dblClickSpeed);\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else if (e.type === 'dblclick' && element.clickTimeout) {\n\t\t\t\tclearTimeout(element.clickTimeout);\n\t\t\t\tdelete element.clickTimeout;\n\t\t\t}\n\t\t}\n\n\t\t// Dispatch the event to the usual handler, but only if we haven't substituted it\n\t\tif (element && typeof options[eventHandlerName] === 'function' && eventHandlers.length === 0) {\n\t\t\teventHandlers.push([ options[eventHandlerName], e, element ]);\n\t\t}\n\n\t\tif (eventHandlers.length > 0) {\n\t\t\te.stopImmediatePropagation();\n\t\t\te.preventDefault();\n\t\t\teventHandlers.forEach(function(eventHandler) {\n\t\t\t\t// [handler, event, element]\n\t\t\t\teventHandler[0].call(eventHandler[2], eventHandler[1]);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tdispatcher: dispatcher,\n\t\tcollapseHoverEvents: collapseHoverEvents\n\t};\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}