{"ast":null,"code":"import _slicedToArray from\"D:/Soft/DIPLOM PROJECT/GitProject/bac/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Line}from\"react-chartjs-2\";import{bacStatus}from\"../utils/bacStatus\";import{userParameters}from\"../utils/userParameters\";import\"chartjs-plugin-annotation\";import{soberingTime}from\"../utils/soberingTime\";import{useLocalStorage}from\"../utils/useLocalState\";import{Modal}from\"../components/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BacInfo=function BacInfo(_ref){var location=_ref.location,history=_ref.history,match=_ref.match;var _userParameters=userParameters(match.params.id),eliminationRate=_userParameters.eliminationRate;var _useLocalStorage=useLocalStorage(\"currentBac\",[]),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),currentBac=_useLocalStorage2[0],setcurrentBac=_useLocalStorage2[1];var _useLocalStorage3=useLocalStorage(\"graphBacData\",[]),_useLocalStorage4=_slicedToArray(_useLocalStorage3,2),graphBacData=_useLocalStorage4[0],setgraphBacData=_useLocalStorage4[1];var _useLocalStorage5=useLocalStorage(\"curBacIdx\",[]),_useLocalStorage6=_slicedToArray(_useLocalStorage5,2),curBacIdx=_useLocalStorage6[0],setcurBacIdx=_useLocalStorage6[1];var _useLocalStorage7=useLocalStorage(\"soberingIdx\",[]),_useLocalStorage8=_slicedToArray(_useLocalStorage7,2),soberingIdx=_useLocalStorage8[0],setSoberingIdx=_useLocalStorage8[1];var _useState=useState(true),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];useEffect(function(){if(location.state!==undefined){setcurrentBac(location.state.currentBac);setgraphBacData(location.state.graphBacData);setcurBacIdx(location.state.curBacIdx);setSoberingIdx(location.state.soberingIdx);}// eslint-disable-next-line\n},[location.state]);var labels=[];for(var n in graphBacData){labels.push((parseFloat(n)*0.01).toFixed(2));console.log(\"LOL\",n);}var editDrinks=function editDrinks(){history.push(\"/user/drinks/\".concat(match.params.id));};var editUser=function editUser(){history.push(\"/user\");};var goHome=function goHome(){history.push(\"/\");};var description=bacStatus(currentBac/10);var graphData={labels:labels,datasets:[{label:\"alkohol v krvi\",fill:true,lineTension:0.1,backgroundColor:\"rgba(75,192,192,0.4)\",borderColor:\"rgba(220,56,6,100)\",borderDashOffset:0.0,borderJoinStyle:\"miter\",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:\"rgba(75,192,192,1)\",pointHoverBorderColor:\"rgba(220,220,220,1)\",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:graphBacData}]};var options={annotation:{annotations:[{type:\"line\",mode:\"vertical\",scaleID:\"x-axis-0\",value:(curBacIdx*0.01).toFixed(2),borderColor:\"black\",borderWidth:1,borderDash:[9,9],label:{backgroundColor:\"rgba(220,56,6,100)\",content:\"Aktuálna úroveň ‰\",enabled:true}}]},tooltips:{enabled:true},scales:{xAxes:[{display:true}]}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container bac__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Logo bac__logo\",onClick:goHome,children:/*#__PURE__*/_jsx(\"h1\",{children:\"Alkoholov\\xFD analyz\\xE1tor\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bac__buttons\",style:{fontFamily:\"none\"},children:[/*#__PURE__*/_jsx(\"h2\",{onClick:editUser,className:\"bac__edit-user-button\",children:\"Upravi\\u0165 pou\\u017E\\xEDvate\\u013Ea\"}),/*#__PURE__*/_jsx(\"h2\",{onClick:editDrinks,className:\"bac__edit-drinks-button\",children:\"Upravi\\u0165 n\\xE1poje\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bac__info-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bac__main-text\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Obsah alkoholu v krvi je\",\" \",/*#__PURE__*/_jsxs(\"b\",{children:[Number(currentBac).toFixed(2),\" promile\"]})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"To znamen\\xE1, \\u017Ee v 1000 mililitroch krvi, ktor\\xE1 cirkuluje vo va\\u0161om tele je \",Number(currentBac).toFixed(2),\" gram \\u010Dist\\xE9ho alkoholu.\"]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"bac__line\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"bac__description\",children:description}),/*#__PURE__*/_jsx(\"hr\",{className:\"bac__line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bac__main-text\",children:[currentBac===0?/*#__PURE__*/_jsx(\"h2\",{children:\"Pravdepodobne ste u\\u017E triezvy\"}):/*#__PURE__*/_jsxs(\"h2\",{children:[\"Budete triezvy o\",\" \",/*#__PURE__*/_jsxs(\"b\",{children:[soberingTime(graphBacData,soberingIdx,eliminationRate),\" \",\"hodiny po skon\\u010Den\\xED pitia.\"]})]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Je to hypot\\xE9za! Tento \\u010Das by sa nemal vyu\\u017E\\xEDva\\u0165 na vypo\\u010Det kedy m\\xF4\\u017Eete sadn\\xFA\\u0165 za volant!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bac__graph-container\",children:/*#__PURE__*/_jsx(Line,{data:graphData,legend:{display:false},options:options})})]}),modal&&/*#__PURE__*/_jsx(Modal,{setModal:setModal})]});};","map":{"version":3,"names":["React","useEffect","useState","Line","bacStatus","userParameters","soberingTime","useLocalStorage","Modal","BacInfo","location","history","match","params","id","eliminationRate","currentBac","setcurrentBac","graphBacData","setgraphBacData","curBacIdx","setcurBacIdx","soberingIdx","setSoberingIdx","modal","setModal","state","undefined","labels","n","push","parseFloat","toFixed","console","log","editDrinks","editUser","goHome","description","graphData","datasets","label","fill","lineTension","backgroundColor","borderColor","borderDashOffset","borderJoinStyle","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","data","options","annotation","annotations","type","mode","scaleID","value","borderWidth","borderDash","content","enabled","tooltips","scales","xAxes","display","fontFamily","Number"],"sources":["D:/Soft/DIPLOM PROJECT/GitProject/bac/src/pages/BacInfo.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { Line } from \"react-chartjs-2\";\nimport { bacStatus } from \"../utils/bacStatus\";\nimport { userParameters } from \"../utils/userParameters\";\nimport \"chartjs-plugin-annotation\";\nimport { ChartOptions } from \"chart.js\";\nimport { soberingTime } from \"../utils/soberingTime\";\nimport { useLocalStorage } from \"../utils/useLocalState\";\nimport { Modal } from \"../components/Modal\";\n\ninterface Props\n  extends RouteComponentProps<\n    { id: string },\n    {},\n    {\n      currentBac: number | any;\n      graphBacData: number[] | any;\n      curBacIdx: number | any;\n      soberingIdx: number | any;\n    }\n  > {}\n\nexport const BacInfo: React.FC<Props> = ({ location, history, match }) => {\n  const { eliminationRate } = userParameters(match.params.id);\n  const [currentBac, setcurrentBac] = useLocalStorage(\"currentBac\", []);\n  const [graphBacData, setgraphBacData] = useLocalStorage(\"graphBacData\", []);\n  const [curBacIdx, setcurBacIdx] = useLocalStorage(\"curBacIdx\", []);\n  const [soberingIdx, setSoberingIdx] = useLocalStorage(\"soberingIdx\", []);\n  const [modal, setModal] = useState(true);\n\n  useEffect(() => {\n    if (location.state !== undefined) {\n      setcurrentBac(location.state.currentBac);\n      setgraphBacData(location.state.graphBacData);\n      setcurBacIdx(location.state.curBacIdx);\n      setSoberingIdx(location.state.soberingIdx);\n    } // eslint-disable-next-line\n  }, [location.state]);\n\n  let labels = [];\n  for (let n in graphBacData) {\n    labels.push((parseFloat(n) * 0.01).toFixed(2));\n    console.log(\"LOL\", n);\n  }\n\n  const editDrinks = () => {\n    history.push(`/user/drinks/${match.params.id}`);\n  };\n\n  const editUser = () => {\n    history.push(\"/user\");\n  };\n\n  const goHome = () => {\n    history.push(\"/\");\n  };\n\n  const description = bacStatus(currentBac / 10);\n\n  const graphData = {\n    labels: labels,\n    datasets: [\n      {\n        label: \"alkohol v krvi\",\n        fill: true,\n        lineTension: 0.1,\n        backgroundColor: \"rgba(75,192,192,0.4)\",\n        borderColor: \"rgba(220,56,6,100)\",\n        borderDashOffset: 0.0,\n        borderJoinStyle: \"miter\",\n        pointBorderWidth: 1,\n        pointHoverRadius: 5,\n        pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\n        pointHoverBorderColor: \"rgba(220,220,220,1)\",\n        pointHoverBorderWidth: 2,\n        pointRadius: 1,\n        pointHitRadius: 10,\n        data: graphBacData,\n      },\n    ],\n  };\n  const options = {\n    annotation: {\n      annotations: [\n        {\n          type: \"line\",\n          mode: \"vertical\",\n          scaleID: \"x-axis-0\",\n          value: (curBacIdx * 0.01).toFixed(2),\n          borderColor: \"black\",\n          borderWidth: 1,\n          borderDash: [9, 9],\n          label: {\n            backgroundColor: \"rgba(220,56,6,100)\",\n            content: \"Aktuálna úroveň ‰\",\n            enabled: true,\n          },\n        },\n      ],\n    },\n    tooltips: { enabled: true },\n    scales: {\n      xAxes: [\n        {\n          display: true,\n        },\n      ],\n    },\n  };\n\n  return (\n    <div className=\"container bac__container\">\n      <div className=\"Logo bac__logo\" onClick={goHome}>\n        <h1>Alkoholový analyzátor</h1>\n      </div>\n      <div className=\"bac__buttons\" style={{ fontFamily: \"none\" }}>\n        <h2 onClick={editUser} className=\"bac__edit-user-button\">\n          Upraviť používateľa\n        </h2>\n        <h2 onClick={editDrinks} className=\"bac__edit-drinks-button\">\n          Upraviť nápoje\n        </h2>\n      </div>\n      <div className=\"bac__info-container\">\n        <div className=\"bac__main-text\">\n          <h2>\n            Obsah alkoholu v krvi je{\" \"}\n            <b>{Number(currentBac).toFixed(2)} promile</b>\n          </h2>\n          <h5>\n            To znamená, že v 1000 mililitroch krvi, ktorá cirkuluje vo vašom\n            tele je {Number(currentBac).toFixed(2)} gram čistého alkoholu.\n          </h5>\n        </div>\n        <hr className=\"bac__line\" />\n        <h3 className=\"bac__description\">{description}</h3>\n        <hr className=\"bac__line\" />\n        <div className=\"bac__main-text\">\n          {currentBac === 0 ? (\n            <h2>Pravdepodobne ste už triezvy</h2>\n          ) : (\n            <h2>\n              Budete triezvy o{\" \"}\n              <b>\n                {soberingTime(graphBacData, soberingIdx, eliminationRate)}{\" \"}\n                hodiny po skončení pitia.\n              </b>\n            </h2>\n          )}\n          <h5>\n            Je to hypotéza! Tento čas by sa nemal využívať na vypočet kedy\n            môžete sadnúť za volant!\n          </h5>\n        </div>\n        <div className=\"bac__graph-container\">\n          <Line\n            data={graphData as any}\n            legend={{ display: false }}\n            options={options as ChartOptions}\n          />\n        </div>\n      </div>\n      {modal && <Modal setModal={setModal} />}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}