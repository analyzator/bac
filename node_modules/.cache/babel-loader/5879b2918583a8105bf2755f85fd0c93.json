{"ast":null,"code":"module.exports = function (Chart) {\n  var chartHelpers = Chart.helpers;\n\n  var helpers = require('./helpers.js')(Chart);\n\n  var events = require('./events.js')(Chart);\n\n  var annotationTypes = Chart.Annotation.types;\n\n  function setAfterDataLimitsHook(axisOptions) {\n    helpers.decorate(axisOptions, 'afterDataLimits', function (previous, scale) {\n      if (previous) previous(scale);\n      helpers.adjustScaleRange(scale);\n    });\n  }\n\n  function draw(drawTime) {\n    return function (chartInstance, easingDecimal) {\n      var defaultDrawTime = chartInstance.annotation.options.drawTime;\n      helpers.elements(chartInstance).filter(function (element) {\n        return drawTime === (element.options.drawTime || defaultDrawTime);\n      }).forEach(function (element) {\n        element.transition(easingDecimal).draw();\n      });\n    };\n  }\n\n  return {\n    beforeInit: function (chartInstance) {\n      var chartOptions = chartInstance.options; // Initialize chart instance plugin namespace\n\n      var ns = chartInstance.annotation = {\n        elements: {},\n        options: helpers.initConfig(chartOptions.annotation || {}),\n        onDestroy: [],\n        firstRun: true,\n        supported: false\n      }; // Add the annotation scale adjuster to each scale's afterDataLimits hook\n\n      chartInstance.ensureScalesHaveIDs();\n\n      if (chartOptions.scales) {\n        ns.supported = true;\n        chartHelpers.each(chartOptions.scales.xAxes, setAfterDataLimitsHook);\n        chartHelpers.each(chartOptions.scales.yAxes, setAfterDataLimitsHook);\n      }\n    },\n    beforeUpdate: function (chartInstance) {\n      var ns = chartInstance.annotation;\n\n      if (!ns.supported) {\n        return;\n      }\n\n      if (!ns.firstRun) {\n        ns.options = helpers.initConfig(chartInstance.options.annotation || {});\n      } else {\n        ns.firstRun = false;\n      }\n\n      var elementIds = []; // Add new elements, or update existing ones\n\n      ns.options.annotations.forEach(function (annotation) {\n        var id = annotation.id || helpers.objectId(); // No element with that ID exists, and it's a valid annotation type\n\n        if (!ns.elements[id] && annotationTypes[annotation.type]) {\n          var cls = annotationTypes[annotation.type];\n          var element = new cls({\n            id: id,\n            options: annotation,\n            chartInstance: chartInstance\n          });\n          element.initialize();\n          ns.elements[id] = element;\n          annotation.id = id;\n          elementIds.push(id);\n        } else if (ns.elements[id]) {\n          // Nothing to do for update, since the element config references\n          // the same object that exists in the chart annotation config\n          elementIds.push(id);\n        }\n      }); // Delete removed elements\n\n      Object.keys(ns.elements).forEach(function (id) {\n        if (elementIds.indexOf(id) === -1) {\n          ns.elements[id].destroy();\n          delete ns.elements[id];\n        }\n      });\n    },\n    afterScaleUpdate: function (chartInstance) {\n      helpers.elements(chartInstance).forEach(function (element) {\n        element.configure();\n      });\n    },\n    beforeDatasetsDraw: draw('beforeDatasetsDraw'),\n    afterDatasetsDraw: draw('afterDatasetsDraw'),\n    afterDraw: draw('afterDraw'),\n    afterInit: function (chartInstance) {\n      // Detect and intercept events that happen on an annotation element\n      var watchFor = chartInstance.annotation.options.events;\n\n      if (chartHelpers.isArray(watchFor) && watchFor.length > 0) {\n        var canvas = chartInstance.chart.canvas;\n        var eventHandler = events.dispatcher.bind(chartInstance);\n        events.collapseHoverEvents(watchFor).forEach(function (eventName) {\n          chartHelpers.addEvent(canvas, eventName, eventHandler);\n          chartInstance.annotation.onDestroy.push(function () {\n            chartHelpers.removeEvent(canvas, eventName, eventHandler);\n          });\n        });\n      }\n    },\n    destroy: function (chartInstance) {\n      var deregisterers = chartInstance.annotation.onDestroy;\n\n      while (deregisterers.length > 0) {\n        deregisterers.pop()();\n      }\n    }\n  };\n};","map":{"version":3,"names":["module","exports","Chart","chartHelpers","helpers","require","events","annotationTypes","Annotation","types","setAfterDataLimitsHook","axisOptions","decorate","previous","scale","adjustScaleRange","draw","drawTime","chartInstance","easingDecimal","defaultDrawTime","annotation","options","elements","filter","element","forEach","transition","beforeInit","chartOptions","ns","initConfig","onDestroy","firstRun","supported","ensureScalesHaveIDs","scales","each","xAxes","yAxes","beforeUpdate","elementIds","annotations","id","objectId","type","cls","initialize","push","Object","keys","indexOf","destroy","afterScaleUpdate","configure","beforeDatasetsDraw","afterDatasetsDraw","afterDraw","afterInit","watchFor","isArray","length","canvas","chart","eventHandler","dispatcher","bind","collapseHoverEvents","eventName","addEvent","removeEvent","deregisterers","pop"],"sources":["C:/Users/Legallaized/Desktop/TestTS/node_modules/chartjs-plugin-annotation/src/annotation.js"],"sourcesContent":["module.exports = function(Chart) {\n\tvar chartHelpers = Chart.helpers;\n\n\tvar helpers = require('./helpers.js')(Chart);\n\tvar events = require('./events.js')(Chart);\n\n\tvar annotationTypes = Chart.Annotation.types;\n\n\tfunction setAfterDataLimitsHook(axisOptions) {\n\t\thelpers.decorate(axisOptions, 'afterDataLimits', function(previous, scale) {\n\t\t\tif (previous) previous(scale);\n\t\t\thelpers.adjustScaleRange(scale);\n\t\t});\n\t}\n\n\tfunction draw(drawTime) {\n\t\treturn function(chartInstance, easingDecimal) {\n\t\t\tvar defaultDrawTime = chartInstance.annotation.options.drawTime;\n\n\t\t\thelpers.elements(chartInstance)\n\t\t\t\t.filter(function(element) {\n\t\t\t\t\treturn drawTime === (element.options.drawTime || defaultDrawTime);\n\t\t\t\t})\n\t\t\t\t.forEach(function(element) {\n\t\t\t\t\telement.transition(easingDecimal).draw();\n\t\t\t\t});\n\t\t};\n\t}\n\n\treturn {\n\t\tbeforeInit: function(chartInstance) {\n\t\t\tvar chartOptions = chartInstance.options;\n\n\t\t\t// Initialize chart instance plugin namespace\n\t\t\tvar ns = chartInstance.annotation = {\n\t\t\t\telements: {},\n\t\t\t\toptions: helpers.initConfig(chartOptions.annotation || {}),\n\t\t\t\tonDestroy: [],\n\t\t\t\tfirstRun: true,\n\t\t\t\tsupported: false\n\t\t\t};\n\n\t\t\t// Add the annotation scale adjuster to each scale's afterDataLimits hook\n\t\t\tchartInstance.ensureScalesHaveIDs();\n\t\t\tif (chartOptions.scales) {\n\t\t\t\tns.supported = true;\n\t\t\t\tchartHelpers.each(chartOptions.scales.xAxes, setAfterDataLimitsHook);\n\t\t\t\tchartHelpers.each(chartOptions.scales.yAxes, setAfterDataLimitsHook);\n\t\t\t}\n\t\t},\n\t\tbeforeUpdate: function(chartInstance) {\n\t\t\tvar ns = chartInstance.annotation;\n\n\t\t\tif (!ns.supported) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!ns.firstRun) {\n\t\t\t\tns.options = helpers.initConfig(chartInstance.options.annotation || {});\n\t\t\t} else {\n\t\t\t\tns.firstRun = false;\n\t\t\t}\n\n\t\t\tvar elementIds = [];\n\n\t\t\t// Add new elements, or update existing ones\n\t\t\tns.options.annotations.forEach(function(annotation) {\n\t\t\t\tvar id = annotation.id || helpers.objectId();\n\t\t\t\t\n\t\t\t\t// No element with that ID exists, and it's a valid annotation type\n\t\t\t\tif (!ns.elements[id] && annotationTypes[annotation.type]) {\n\t\t\t\t\tvar cls = annotationTypes[annotation.type];\n\t\t\t\t\tvar element = new cls({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\toptions: annotation,\n\t\t\t\t\t\tchartInstance: chartInstance,\n\t\t\t\t\t});\n\t\t\t\t\telement.initialize();\n\t\t\t\t\tns.elements[id] = element;\n\t\t\t\t\tannotation.id = id;\n\t\t\t\t\telementIds.push(id);\n\t\t\t\t} else if (ns.elements[id]) {\n\t\t\t\t\t// Nothing to do for update, since the element config references\n\t\t\t\t\t// the same object that exists in the chart annotation config\n\t\t\t\t\telementIds.push(id);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Delete removed elements\n\t\t\tObject.keys(ns.elements).forEach(function(id) {\n\t\t\t\tif (elementIds.indexOf(id) === -1) {\n\t\t\t\t\tns.elements[id].destroy();\n\t\t\t\t\tdelete ns.elements[id];\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tafterScaleUpdate: function(chartInstance) {\n\t\t\thelpers.elements(chartInstance).forEach(function(element) {\n\t\t\t\telement.configure();\n\t\t\t});\n\t\t},\n\t\tbeforeDatasetsDraw: draw('beforeDatasetsDraw'),\n\t\tafterDatasetsDraw: draw('afterDatasetsDraw'),\n\t\tafterDraw: draw('afterDraw'),\n\t\tafterInit: function(chartInstance) {\n\t\t\t// Detect and intercept events that happen on an annotation element\n\t\t\tvar watchFor = chartInstance.annotation.options.events;\n\t\t\tif (chartHelpers.isArray(watchFor) && watchFor.length > 0) {\n\t\t\t\tvar canvas = chartInstance.chart.canvas;\n\t\t\t\tvar eventHandler = events.dispatcher.bind(chartInstance);\n\t\t\t\tevents.collapseHoverEvents(watchFor).forEach(function(eventName) {\n\t\t\t\t\tchartHelpers.addEvent(canvas, eventName, eventHandler);\n\t\t\t\t\tchartInstance.annotation.onDestroy.push(function() {\n\t\t\t\t\t\tchartHelpers.removeEvent(canvas, eventName, eventHandler);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tdestroy: function(chartInstance) {\n\t\t\tvar deregisterers = chartInstance.annotation.onDestroy;\n\t\t\twhile (deregisterers.length > 0) {\n\t\t\t\tderegisterers.pop()();\n\t\t\t}\n\t\t}\n\t};\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}